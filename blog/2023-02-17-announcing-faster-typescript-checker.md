---
slug: announcing-faster-typescript-checker
title: 'Announcing a faster TypeScript checker for StrykerJS'
authors: danny-berkelaar
tags: [stryker-js]
---

We're excited to announce StrykerJS 6.4. Of course, this release comes with [some bug fixes](https://github.com/stryker-mutator/stryker-js/releases/tag/v6.4.0), but in this article, we want to explain the upgraded TypeScript Checker.

The performance of the TypeScript checker has been an issue for quite some time now. In some cases it caused a Stryker run to take twice as long, while mutation testing itself already is a time-consuming process. But there is great news, a new version of the Typescript checker has been released which makes some runs up to 50% faster than before!

<!-- truncate -->

To update to the latest version of StrykerJS, install `@latest` as follows:

```shell
npm install --save-dev @stryker-mutator/core@latest
# OR
yarn add --dev @stryker-mutator/core@latest
```

Don't forget to update Stryker plugins. For example, when using the TypeScript checker:

```shell
npm install --save-dev @stryker-mutator/typescript-checker@latest
# OR
yarn add --dev @stryker-mutator/typescript-checker@latest
```

If you're new to mutation testing, it's a way to measure your tests' effectiveness. Please take a look at [our RoboBar ü§ñüç∑ example](https://stryker-mutator.io/example) and see how even 100% code coverage doesn't tell the whole story. Mutation testing is the only way to know if your tests are any good.

Now, let's dive into the upgraded TypeScript checker! üèä‚Äç‚ôÇÔ∏è

## ‚è© The upgraded TypeScript Checker

The ability to group mutants, which was introduced in version 6.0 of StrykerJS, has been implemented to gain performance. By grouping mutants that are not related to each other the TypeScript checker can validate more mutants in a single cycle. How groups are created is explained [here](#üîé-in-depth).

**Note:** By default the new TypeScript Checker implementation is used. There are some minor [drawbacks](#üò•-drawbacks) which can be reverted by using the settings explained in [drawbacks](#üò•-drawbacks) paragraph.

In our tests on the `core` package of StrykerJS we found that the performance was increased by 43% and still being able to find 99.1% of the compile errors. The larger a project is the more performance gain the TypeScript will have.

## üîé In depth

To improve the performance of the TypeScript checker, we needed to find a way to check multiple mutants at once. However, simply inserting all mutants into the project and compiling it wouldn't work because the references between the compile errors and the mutants could not be found. To solve this problem, we decided to group mutants based on their references to each other. We chose to group mutants based on file references to keep it simple, although we may optimize this further in the future.

To create these groups, we first generate a dependency graph from the project files using the TypeScript Compiler. Starting with an empty group, we pick a mutant from the list and check if its related file is not already in the group and if the files of the mutants already in the group have no dependencies on it. If it passes these checks, the mutant is added to the group. We then repeat this process with the next mutant until the group is so called "full", at which point we start a new group. A "full" group is a group which can't take more mutants because those mutant don't comply the the checks. This continues until all mutants have been grouped.

Once the groups are created, we check them for compile errors. All mutants in a group are inserted into the code, and then the TypeScript Compiler runs. Any compile errors generated by the compiler are captured and referenced back to the mutants that caused them, using the dependency graph created in the group method.

## üò• Drawbacks

It's worth noting that the mutation results may not always be 100% accurate with the new TypeScript checker. The issue appears to stem from how TypeScript resolves its compile errors. For more information on this topic, check out the [issue](https://github.com/microsoft/TypeScript/issues/46272) we created at the TypeScript repository.

If your project requires the highest possible level of accuracy, it's still possible to use the old implementation. This can be achieved by adjusting the configuration settings accordingly as shown below. However, it's important to bear in mind that this approach comes with a trade-off: you'll be forfeiting the performance gains offered by the new checker.

`stryker.conf.json`

```json
{
  ...,
  "typescriptChecker": {
    "prioritizePerformanceOverAccuracy": false // set to false (default true)
  }
}
```

## üîÆ What's next

Please try out the new TypeScript Checker and let us know what you think. We would love to hear from you! Also, look at the [6.4 release notes](https://github.com/stryker-mutator/stryker-js/releases/tag/v6.4.0) to see the complete list of changes in 6.4.

In the medium term, we will be working on supporting `vitest` and `node-tap`. We maintain a [üõ£ roadmap on github](https://github.com/stryker-mutator/stryker-js/wiki/Roadmap), so you can always see what we're actively working on.

In the meantime, we would love to hear from you! So please voice your feedback in the comment section below üëá, on [our slack channel](https://join.slack.com/t/stryker-mutator/shared_invite/enQtOTUyMTYyNTg1NDQ0LTU4ODNmZDlmN2I3MmEyMTVhYjZlYmJkOThlNTY3NTM1M2QxYmM5YTM3ODQxYmJjY2YyYzllM2RkMmM1NjNjZjM) or by sending a [tweet](https://twitter.com/stryker_mutator/).
