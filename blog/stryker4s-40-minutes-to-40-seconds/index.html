<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Stryker Mutator Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Stryker Mutator Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-104444094-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Stryker Mutator" href="/opensearch.xml"><title data-react-helmet="true">Stryker4s: from 40 minutes to 40 seconds | Stryker Mutator</title><meta data-react-helmet="true" property="og:title" content="Stryker4s: from 40 minutes to 40 seconds | Stryker Mutator"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Stryker4s is your friendly mutation testing framework for Scala. Compared to earlier versions, Stryker4s 0.12 achieves a 60x speed increase in some scenarios ğŸ¤¯. Are you curious to know how? Keep on reading."><meta data-react-helmet="true" property="og:description" content="Stryker4s is your friendly mutation testing framework for Scala. Compared to earlier versions, Stryker4s 0.12 achieves a 60x speed increase in some scenarios ğŸ¤¯. Are you curious to know how? Keep on reading."><meta data-react-helmet="true" property="og:url" content="https://stryker-mutator.io/blog/stryker4s-40-minutes-to-40-seconds"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="og:type" content="website"><meta data-react-helmet="true" property="og:image" content="https://stryker-mutator.io/images/strykerman.png"><meta data-react-helmet="true" name="twitter:image" content="https://stryker-mutator.io/images/strykerman.png"><link data-react-helmet="true" rel="shortcut icon" href="/images/stryker.svg"><link data-react-helmet="true" rel="canonical" href="https://stryker-mutator.io/blog/stryker4s-40-minutes-to-40-seconds"><link data-react-helmet="true" rel="alternate" href="https://stryker-mutator.io/blog/stryker4s-40-minutes-to-40-seconds" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://stryker-mutator.io/blog/stryker4s-40-minutes-to-40-seconds" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.968be6ca.css">
<link rel="preload" href="/assets/js/runtime~main.16a846e6.js" as="script">
<link rel="preload" href="/assets/js/main.7b8e8fd0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:var(--ifm-navbar-background-color, #fff);color:var(--ifm-navbar-link-color, #000)" role="banner"><div class="announcementBarContent_3EUC announcementBarCloseable_3myR">ğŸ“½ï¸ <a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/watch?v=Vq9eqZzblfg">Watch the talk "Who is testing your tests?" from <i>Scala Love in the City</i></a></div><button type="button" class="announcementBarClose_38nx clean-btn" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Stryker Mutator</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/stryker-js/introduction">For JavaScript</a><a class="navbar__item navbar__link" href="/docs/stryker-net/Introduction">For C#</a><a class="navbar__item navbar__link" href="/docs/stryker4s/getting-started">For Scala</a><a class="navbar__item navbar__link" href="/docs/General/example">An example</a></div><div class="navbar__items navbar__items--right"><a href="https://dashboard.stryker-mutator.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link header-github-link" target="_self" aria-label="GitHub repository dropdown"></a><ul class="dropdown__menu"><li><a href="https://github.com/stryker-mutator/stryker-js" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>StrykerJS (JS &amp; TS)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/stryker-net" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Stryker.NET (C#)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/stryker4s" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Stryker4s (Scala)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/mutation-testing-elements" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Mutation Testing Elements<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/stryker-mutator.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>This website<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/blog/stryker4s-40-minutes-to-40-seconds">Stryker4s: from 40 minutes to 40 seconds</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/announcing-stryker-js-5-brave-new-dimension.md">Announcing StrykerJS 5.0 - Brave new Dimension</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/announcing-stryker-4-mutation-switching">Announcing Stryker 4.0 - Mutation Switching</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/announcing-stryker-4-beta-mutation-switching">Announcing Stryker 4.0 Beta</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/azure-pipelines-integration">Integrating Stryker.NET in your azure pipelines</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="blogPostTitle_GeHD">Stryker4s: from 40 minutes to 40 seconds</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-06-16T00:00:00.000Z">June 16, 2021</time> Â· 8 min read</div><div class="avatar margin-vert--md"><a href="https://github.com/hugo-vrijswijk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/10114577" alt="Hugo van Rijswijk"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/hugo-vrijswijk" target="_blank" rel="noopener noreferrer">Hugo van Rijswijk</a></div><small class="avatar__subtitle">Stryker4s Team</small></div></div></header><div class="markdown"><p>Stryker4s is your friendly mutation testing framework for Scala. Compared to earlier versions, Stryker4s <code>0.12</code> achieves a 60x speed increase in some scenarios ğŸ¤¯. Are you curious to know how? Keep on reading.</p><p>If you&#x27;re new to mutation testing, it&#x27;s a way to measure your tests&#x27; effectiveness. A mutation testing framework will make small changes, called <em>mutants</em>, one by one in your source code. Then it will run your tests to see if one of them fails. If so, you just &quot;killed&quot; that mutant; if not, it &quot;survived&quot;. If too many mutants survive, you probably want to improve your tests. The mutation testing report will give you insides into the test cases you may have missed. If this all sounds complicated, please take a look at the recent talk <a href="https://www.youtube.com/watch?v=Vq9eqZzblfg" target="_blank" rel="noopener noreferrer">&quot;Who is testing your tests?&quot;</a> from <em>Scala Love in the City</em> or check out the rest of the <a href="/">website</a>.</p><p>In this blog we&#x27;ll talk about the performance improvements made in the last couple Stryker4s versions and dive into how they are made possible.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-in-short"></a>ğŸ“ƒ In short<a class="hash-link" href="#-in-short" title="Direct link to heading">#</a></h2><p>Imagine you&#x27;re on your way to a sunny holiday destination. You&#x27;ve checked in your luggage, gone through customs, and boarded the plane. Then, the plane moves forward a couple of meters, and you&#x27;re thrown out and sent back to customs before going through the whole thing again. It&#x27;ll take years before you get to sip on your umbrella cocktail ğŸ¹! This is exactly how Stryker4s has been running your codeâ€¦ until now.</p><p>A lot has changed in recent versions of Stryker4s. Stryker4s now runs your tests in an entirely different way, bringing big performance improvements. As an example, running Stryker4s on the Stryker4s codebase used to take about 40 minutes on <code>0.9.1</code>. On<code>0.12.1</code>, this has been reduced to a fast 40 seconds. A short list of some new features:</p><ul><li>âœ¨ New testrunner boasting improved performance</li><li>ğŸ”€ Concurrency to improve speed by using all available cores</li><li>ğŸ•µï¸â€â™€ï¸ Coverage analysis to skip mutants without coverage</li><li>â±ï¸ Timeout detection in tests</li><li>ğŸ‘½ New mutator: regular expressions. Thanks to <a href="https://github.com/stryker-mutator/weapon-regex/" target="_blank" rel="noopener noreferrer">Weapon regeX</a>!</li></ul><p>In the rest of this blog post, we&#x27;ll do a deep-dive into the increased performance. Let&#x27;s start by taking a look at the older version of Stryker4s.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-the-old"></a>ğŸ¢ The old<a class="hash-link" href="#-the-old" title="Direct link to heading">#</a></h2><p>In the older sbt plugin, there was a lot of overhead in running your tests. As a quick reminder, Stryker4s uses <a href="https://stryker-mutator.io/blog/mutation-switching/" target="_blank" rel="noopener noreferrer">mutation switching</a>, so it only has to compile your code once, instead of for each mutant. After mutating your source code, Stryker4s would essentially just call <code>sbt test</code> with the mutated code for every mutant. This means sbt would:</p><ol><li>Look for code changes (which there never are).</li><li>Make sure all compiled code is up-to-date (which it always is).</li><li>Start a new Java process with your class files, dependencies, and a small sbt entry point library.</li><li>Run your tests and report the results back to the main sbt process.</li><li>Repeat for the next mutant.</li></ol><div id="mermaid-sbt-old"></div><div class="mermaid-diagram"></div><p>Doing those checks and starting a new process makes a lot of sense for a development workflow, but not for mutation testing. This implementation of the test runner hasn&#x27;t changed much in the two years that the plugin has existed. Time for some improvements!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-the-new"></a>ğŸ‡ The new<a class="hash-link" href="#-the-new" title="Direct link to heading">#</a></h2><p>It&#x27;s clear the process can be optimized. Once Stryker4s is set up and all mutations have been compiled, the only thing we really want to do is run some tests and get a result. Sbt doesn&#x27;t give plugins full control over the entire test process, but it does have all the information about <em>what</em> your project looks like. This is something we can work with!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ï¸-meet-build-info"></a>ğŸ—ï¸ Meet: build info<a class="hash-link" href="#ï¸-meet-build-info" title="Direct link to heading">#</a></h3><p>The first thing Stryker4s needs to do is figure out what tests our project contains. One of the great things about sbt is its standardization and extensibility as a build tool. Because sbt knows exactly what your project looks like, plugins can retrieve all this information. To find out what tests you have, Stryker4s uses three pieces of information from sbt:</p><ol><li><code>fullClasspath</code> location of all dependency JARs (including test-dependencies) and <code>.class</code> files of your compiled code.</li><li><code>loadedTestFrameworks</code> the configured test framework. Sbt detects a couple of frameworks by default, but if you use MUnit you might remember having to add <code>testFrameworks += new TestFramework(&quot;munit.Framework&quot;)</code> to your build.sbt before MUnit can run.</li><li><code>testGrouping</code> contains every test suite sbt discovers in your project.</li></ol><p>You can try running these yourself in a sbt console to see how Stryker4s looks at your project:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sbt:stryker4s-core&gt; show fullClasspath</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[info] * Attributed(~/stryker4s/core/target/jvm-2.13/classes)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[info] * Attributed(~/.cache/coursier/v1/https/repo1.maven.org/maven2/org/scala-lang/scala-</span></span><span class="token-line" style="color:#393A34"><span class="token plain">library/2.13.4/scala-library-2.13.4.jar)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[info] * Attributed(~/.cache/coursier/v1/https/repo1.maven.org/maven2/com/github/pathikrit/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">better-files_2.13/3.9.1/better-files_2.13-3.9.1.jar)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sbt:stryker4s-core&gt; show loadedTestFrameworks</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[info] Map(TestFramework(org.scalatest.tools.Framework, org.scalatest.tools.ScalaTestFramework) -&gt; org</span></span><span class="token-line" style="color:#393A34"><span class="token plain">.scalatest.tools.Framework@2b9d52d5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sbt:stryker4s-core&gt; show testGrouping</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[info] * (&lt;default&gt;,Vector(Test stryker4s.config.TestFilterTest : subclass(false, org.scalatest.Suite)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">, Test stryker4s.extension.FileExtensionsTest : subclass(false, org.scalatest.Suite), Test stryker4s.m</span></span><span class="token-line" style="color:#393A34"><span class="token plain">utants.MutatorTest : subclass(false, org.scalatest.Suite), Test stryker4s.mutants.AddAllMutationsTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">: subclass(false, org.scalatest.Suite), ...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We now know what tests are in your project. Let&#x27;s have a look at running those tests:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ğŸ§ª-meet-test-interfaces"></a>ğŸ§ª Meet: test interfaces<a class="hash-link" href="#ğŸ§ª-meet-test-interfaces" title="Direct link to heading">#</a></h3><p>This is something our friends in the NodeJS world are (rightfully) a little <a href="https://stryker-mutator.io/docs/stryker-js/plugins#test-runners" target="_blank" rel="noopener noreferrer">jealous of</a> ğŸ˜. When you call <code>sbt test</code>, sbt will look for any registered test frameworks that implement the <a href="https://github.com/sbt/test-interface" target="_blank" rel="noopener noreferrer">test-interface</a> (from <code>loadedTestFrameworks</code>). This is a small collection of interfaces that let a test framework tell sbt how to run tests in that framework. Because all test frameworks in sbt implement this interface, we have a single programmatic way to call any test framework. It doesn&#x27;t matter if you&#x27;re using ScalaTest, MUnit, Weaver-test or anything else. Using a bit of reflection, we can create an instance of the test framework runner and run tests:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val framework = classLoader.loadClass(testFrameworkClass).getConstructor().newInstance().asInstanceOf[Framework]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">val runner = framework.runner(args, remoteArgs, classLoader)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">val testTasks: Array[Task] = runner.tasks(testGrouping.taskDefs)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">testTasks.foreach(testTask =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  testTask.execute()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Stryker4s can then use this to activate a mutant and instantly run the tests without any overhead from sbt.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-meet-concurrency"></a>ğŸ”€ Meet: concurrency<a class="hash-link" href="#-meet-concurrency" title="Direct link to heading">#</a></h3><p>Stryker4s activates and runs each mutant one by one in isolation. This is to make sure one mutant won&#x27;t have an impact on the result of another. This is done by creating a separate process for it. However, there&#x27;s no rule that says we can&#x27;t start multiple Java processes at the same time and run those in parallel.</p><p>With multiple separate worker-processes, each worker has its own separate memory, threads, and active mutant. This way, if one mutant results in an <code>OutOfMemoryError</code> it won&#x27;t impact the others. In long-lived processes like mutation testing, the performance increases of parallelism far outweigh the overhead of starting and managing multiple workers.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ğŸ§°-putting-it-all-together"></a>ğŸ§° Putting it all together<a class="hash-link" href="#ğŸ§°-putting-it-all-together" title="Direct link to heading">#</a></h3><p>Stryker4s can start a new process with all the information collected above. Because Stryker4s now fully controls how it runs your tests, it can eliminate any overhead of starting new processes or looking for source code changes. It looks a little something like this:</p><ol><li>Start new worker processes in parallel with the full test classpath and send them all the needed test setup.</li><li>Create a new instance of the test framework in the created process.</li><li>For each mutant, programmatically run the tests on the worker process.</li></ol><div id="mermaid-sbt-new"></div><div class="mermaid-diagram"></div><p>As you can see, there&#x27;s not much overhead left in running your tests. The limiting factor is now how fast your tests are! When running Stryker4s on itself, this method improves performance 60x: from 40 minutes to 40 seconds.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-whats-next"></a>ğŸ”® What&#x27;s next?<a class="hash-link" href="#-whats-next" title="Direct link to heading">#</a></h2><p>In this post, we&#x27;ve shown you how Stryker4s uses sbt&#x27;s test information to reduce overhead and provide massive performance increases. We&#x27;re very excited for you to try out the increased performance! If you have any feedback or questions, find us on <a href="https://github.com/stryker-mutator/stryker4s" target="_blank" rel="noopener noreferrer">GitHub</a> or <a href="https://join.slack.com/t/stryker-mutator/shared_invite/enQtOTUyMTYyNTg1NDQ0LTU4ODNmZDlmN2I3MmEyMTVhYjZlYmJkOThlNTY3NTM1M2QxYmM5YTM3ODQxYmJjY2YyYzllM2RkMmM1NjNjZjM" target="_blank" rel="noopener noreferrer">Slack</a>.</p><p>Next, we want to also bring these performance improvements to the Maven plugin, add per-test coverage support, improve the HTML report to show your tests and perhaps even support some <a href="https://github.com/stryker-mutator/stryker4k" target="_blank" rel="noopener noreferrer">new languages</a>?</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><a class="margin-horiz--sm" href="/blog/tags/stryker-4-s">stryker4s</a></div><div class="col margin-top--sm"><a href="https://github.com/stryker-mutator/stryker-mutator.github.io/edit/develop/blog/2021-06-16-stryker4s-sbt-performance.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/announcing-stryker-js-5-brave-new-dimension.md"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Announcing StrykerJS 5.0 - Brave new Dimension Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-in-short" class="table-of-contents__link">ğŸ“ƒ In short</a></li><li><a href="#-the-old" class="table-of-contents__link">ğŸ¢ The old</a></li><li><a href="#-the-new" class="table-of-contents__link">ğŸ‡ The new</a><ul><li><a href="#ï¸-meet-build-info" class="table-of-contents__link">ğŸ—ï¸ Meet: build info</a></li><li><a href="#ğŸ§ª-meet-test-interfaces" class="table-of-contents__link">ğŸ§ª Meet: test interfaces</a></li><li><a href="#-meet-concurrency" class="table-of-contents__link">ğŸ”€ Meet: concurrency</a></li><li><a href="#ğŸ§°-putting-it-all-together" class="table-of-contents__link">ğŸ§° Putting it all together</a></li></ul></li><li><a href="#-whats-next" class="table-of-contents__link">ğŸ”® What&#39;s next?</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/General/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/stryker-mutator/shared_invite/enQtOTUyMTYyNTg1NDQ0LTU4ODNmZDlmN2I3MmEyMTVhYjZlYmJkOThlNTY3NTM1M2QxYmM5YTM3ODQxYmJjY2YyYzllM2RkMmM1NjNjZjM" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/stryker_mutator" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/stryker-mutator/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://infosupport.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/info-support.svg" alt="Info Support Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/info-support.svg" alt="Info Support Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Powered by <a target="_blank" rel="noopener noreferrer" href="https://www.infosupport.com/open-source/">Info Support</a>.<br>Stryker is released under the Apache 2.0 license. Site by the <a target="_blank" rel="noopener noreferrer" href="https://github.com/orgs/stryker-mutator/people">Stryker team</a>. Logo by Selina van den Top.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.16a846e6.js"></script>
<script src="/assets/js/main.7b8e8fd0.js"></script>
</body>
</html>