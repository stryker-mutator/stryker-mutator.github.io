<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Stryker Mutator Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Stryker Mutator Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-104444094-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Stryker Mutator" href="/opensearch.xml"><title data-react-helmet="true">Announcing Stryker 4.0 Beta | Stryker Mutator</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://stryker-mutator.io/images/strykerman.png"><meta data-react-helmet="true" name="twitter:image" content="https://stryker-mutator.io/images/strykerman.png"><meta data-react-helmet="true" property="og:url" content="https://stryker-mutator.io/blog/announcing-stryker-4-beta-mutation-switching"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="og:type" content="website"><meta data-react-helmet="true" property="og:title" content="Announcing Stryker 4.0 Beta | Stryker Mutator"><meta data-react-helmet="true" name="description" content="We&#x27;re excited to announce the beta of the next major release of the Stryker mutation testing framework for JavaScript and friends: Stryker 4.0."><meta data-react-helmet="true" property="og:description" content="We&#x27;re excited to announce the beta of the next major release of the Stryker mutation testing framework for JavaScript and friends: Stryker 4.0."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-07-13T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/nicojs"><meta data-react-helmet="true" property="article:tag" content="stryker"><link data-react-helmet="true" rel="shortcut icon" href="/images/stryker.svg"><link data-react-helmet="true" rel="canonical" href="https://stryker-mutator.io/blog/announcing-stryker-4-beta-mutation-switching"><link data-react-helmet="true" rel="alternate" href="https://stryker-mutator.io/blog/announcing-stryker-4-beta-mutation-switching" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://stryker-mutator.io/blog/announcing-stryker-4-beta-mutation-switching" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.023ff8c5.css">
<link rel="preload" href="/assets/js/runtime~main.c69fd204.js" as="script">
<link rel="preload" href="/assets/js/main.362942d5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:var(--ifm-navbar-background-color, #fff);color:var(--ifm-navbar-link-color, #000)" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">üìΩÔ∏è <a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/watch?v=Vq9eqZzblfg">Watch the talk "Who is testing your tests?" from <i>Scala Love in the City</i></a></div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Stryker Mutator</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/stryker-js/introduction">For JavaScript</a><a class="navbar__item navbar__link" href="/docs/stryker-net/Introduction">For C#</a><a class="navbar__item navbar__link" href="/docs/stryker4s/getting-started">For Scala</a><a class="navbar__item navbar__link" href="/docs/General/example">An example</a></div><div class="navbar__items navbar__items--right"><a href="https://dashboard.stryker-mutator.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link header-github-link" target="_self" aria-label="GitHub repository dropdown"></a><ul class="dropdown__menu"><li><a href="https://github.com/stryker-mutator/stryker-js" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>StrykerJS (JS &amp; TS)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/stryker-net" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Stryker.NET (C#)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/stryker4s" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Stryker4s (Scala)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/mutation-testing-elements" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Mutation Testing Elements<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/stryker-mutator/stryker-mutator.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>This website<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/stryker4s-40-minutes-to-40-seconds">Stryker4s: from 40 minutes to 40 seconds</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/announcing-stryker-js-5-brave-new-dimension.md">Announcing StrykerJS 5.0 - Brave new Dimension</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/announcing-stryker-4-mutation-switching">Announcing Stryker 4.0 - Mutation Switching</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/blog/announcing-stryker-4-beta-mutation-switching">Announcing Stryker 4.0 Beta</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/azure-pipelines-integration">Integrating Stryker.NET in your azure pipelines</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Announcing Stryker 4.0 Beta</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2020-07-13T00:00:00.000Z" itemprop="datePublished">July 13, 2020</time> ¬∑ 7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/nicojs" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars3.githubusercontent.com/u/1828233?s=400&amp;u=fec18ad3776aaafec54c49bbd7173a841ae7ea59&amp;v=4" alt="Nico Jansen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/nicojs" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nico Jansen</span></a></div><small class="avatar__subtitle" itemprop="description">Stryker Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We&#x27;re excited to announce the beta of the next major release of the Stryker mutation testing framework for JavaScript and friends: Stryker 4.0.</p><p>This beta is a huge milestone because it means a fundamental shift in the way Stryker works internally. It now uses &quot;Mutation switching&quot;, a technique that can improve performance.</p><p>This, unfortunately, couldn&#x27;t be done without breaking changes. These changes are mostly limited to the internal plugin API&#x27;s except for the changes highlighted in this blog article.</p><p>To get started using the beta, update your Stryker dependencies using npm or yarn.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --save-dev @stryker-mutator/core@next</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Don&#x27;t forget to update Stryker plugins. For example, when using mocha:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --save-dev @stryker-mutator/mocha-runner@next</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This beta is released early, in order to get community feedback. We&#x27;ve not yet updated the docs with the changes specified in this blog article. At this moment, the jest-runner and the command test runner <em>still need to be migrated and will not work as expected</em>.</p><p><em>Note: Since beta version <code>4.0.0-beta.2</code>, both the command test runner and the jest test runner are supported. However, the command test runner does have some <a href="https://github.com/stryker-mutator/stryker-js/pull/2345" target="_blank" rel="noopener noreferrer">limitations</a></em></p><p>If you&#x27;re new to mutation testing, it&#x27;s a way to measure your tests&#x27; effectiveness. Please take a look at <a href="/example">our RoboBar ü§ñüç∑ example</a> and see how even 100% code coverage doesn&#x27;t tell the whole story. Mutation testing is the only way to make sure your code is thoroughly tested.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-mutation-switching"></a>üëΩ Mutation switching<a class="hash-link" href="#-mutation-switching" title="Direct link to heading">#</a></h2><p>Mutation switching is a way to simultaneously put all mutants into your code while making sure only one mutant is active at the same time. Let&#x27;s take a look at an example.</p><p>Let&#x27;s take this.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When you feed this code to Stryker, it will generate two mutants:</p><p>üëΩ <code>function add(a, b) { return a - b }</code><br>
üëæ <code>function add(a, b) {}</code></p><p>Previous versions of Stryker would make two copies of the source code. One for each mutant. This changes with Stryker 4.0. Both mutants will be placed into the code <em>at the same time</em>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">global</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">activeMutant</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">activeMutant</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>(simplified example)</p><p>Stryker can now run your tests twice while changing which mutant is active in the process. Mutation switching can improve performance dramatically, depending on the type of project. For example, when you bundle your code with webpack before running the tests, then webpack only needs to run once. The same goes for TypeScript projects where you compile your code before testing.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-instrumentation-with-babel"></a>üê† Instrumentation with Babel<a class="hash-link" href="#-instrumentation-with-babel" title="Direct link to heading">#</a></h2><p>Mutation Switching is a significant performance improvement, but it means that Stryker is required to perform some complex transformations of the <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noopener noreferrer">Abstract Syntax Tree (AST)</a>.</p><p>Doing this <em>instrumentation</em> means visiting each node of the AST to collect and place mutants. This instrumentation is implemented with the <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">Babel</a> parser and now ships with <code>@stryker-mutator/core</code>. We&#x27;re taking advantage of Babel 7&#x27;s support to parse and print any type of JavaScript, including TypeScript code.</p><p>This means that it is <em>no longer needed to configure the <code>mutator</code></em> in your Stryker configuration. Stryker will always use the new mutation instrumenter. It supports TypeScript, JavaScript, Flow, and JSX. It even supports mutating script tags in <code>.html</code> or <code>.vue</code> files. It also picks up your babel configuration out-of-the-box, so no custom configuration is needed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-build-command-support"></a>üë∑‚Äç‚Äç Build command support<a class="hash-link" href="#-build-command-support" title="Direct link to heading">#</a></h2><p>With mutation switching, all mutants are placed in the code at the same time. This also means that it only has to be built (transpiled or bundled) once.</p><p><em>Note: not all projects need building. Simple projects might deploy JS code as is, or the test runner might take care of this step for you. For example, running your tests with <code>ts-node</code> or <code>babel/register</code> or running it with <code>Jest</code> or <code>Karma</code> with the <a href="https://github.com/webpack-contrib/karma-webpack" target="_blank" rel="noopener noreferrer">webpack plugin</a>.</em></p><p>Before mutation switching, this would be the job of the <code>transpiler</code> plugin type. For example, <code>transpiler: [&#x27;babel&#x27;]</code> would mean that all files would be transpiled with the <code>@stryker-mutator/babel-transpiler</code> plugin. It was a bit complex to create a transpiler plugin, and since every mutant needed to transpiled, it was slow. Every transpiler/bundler needed its a transpiler plugin.</p><p>Stryker 4.0 will no longer support the <code>transpiler</code> plugins. Instead, it allows you to configure a <code>buildCommand</code> yourself. A build command can be any command. Some examples include <code>npm run build</code>, <code>tsc -b</code> or <code>webpack --config webpack.config</code>. This means that the available plugins do not limit you.</p><p>The following dependencies are therefore no longer needed, and you can simply remove them:</p><ul><li><code>@stryker-mutator/babel-transpiler</code></li><li><code>@stryker-mutator/webpack-transpiler</code></li><li><code>@stryker-mutator/typescript</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-checker-plugin"></a>‚úÖ Checker plugin<a class="hash-link" href="#-checker-plugin" title="Direct link to heading">#</a></h2><p>You might know that the old <code>@stryker-mutator/typescript</code> transpiler not only transpiled your code but also filtered out mutants that resulted in type errors, marking them with <code>compile error</code> (or <code>transpile error</code>) in your report. Mutants with this status are marked as &quot;invalid&quot; and do not influence your mutation score.</p><p>Since Stryker 4.0 <a href="#build-command-support">removes the transpiler plugin type</a> we needed a new plugin that can perform this type checking. Introducing the <code>Checker</code> plugin type. In the Stryker 4 release, we will include one such checkers, the <code>@stryker-mutator/typescript-checker</code>.</p><p>Install it with <code>npm install @stryker-mutator/typescript-checker@next</code></p><p>Configure it with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;checkers&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;typescript&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;tsconfigFile&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tsconfig.json&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>(tsconfig.json is the default setting for &quot;tsconfigFile&quot;).</p><p>Please see <a href="https://github.com/stryker-mutator/stryker-js/tree/epic/mutation-switching/packages/typescript-checker#readme" target="_blank" rel="noopener noreferrer">the TypeScript checker&#x27;s readme for more details</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-more-coverage-analysis"></a>‚òî More coverage analysis<a class="hash-link" href="#-more-coverage-analysis" title="Direct link to heading">#</a></h2><p>Coverage analysis is a way to speed up mutation testing. Stryker always came with three flavors:</p><ul><li>&quot;off&quot;: No coverage analysis</li><li>&quot;all&quot;: Coverage is measured for the entire test suite. Mutants that are not covered by even one test are marked with &quot;NoCoverage&quot;</li><li>&quot;perTest&quot;: Coverage is measured per test. Only tests that cover a specific mutant are run for that mutant.</li></ul><p>Running with &quot;perTest&quot; coverage yields a significant performance improvement (usually between 40% and 60%). However, most projects were unable to take advantage of it because Stryker relied on a complex mechanism of <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a> code coverage combined with hooks in the test runner. It only worked in scenarios without complicated transpiling or bundling.</p><p>With the introduction of mutation switching, the instrumenter is responsible for inserting coverage instrumentation into the code. This means that Stryker can measure mutant coverage, <em>regardless of which bundler/transpiler you are using</em>. The only requirement is that Stryker needs to be able to hook into the test runner. This is currently supported for <code>@stryker-mutator/mocha-runner</code>, <code>@stryker-mutator/karma-runner</code> and <code>@stryker-mutator/jasmine-runner</code>. Support for <a href="https://github.com/stryker-mutator/stryker-js/issues/2316" target="_blank" rel="noopener noreferrer"><code>@stryker-mutator/jest-runner</code> is planned</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-other-changes"></a>üßπ Other changes<a class="hash-link" href="#-other-changes" title="Direct link to heading">#</a></h2><p>We also decided to take this opportunity to improve the maintainability of the Stryker code further. That&#x27;s why we&#x27;ve decided to drop support for two more plugin types.</p><ul><li>The <code>TestFramework</code> plugin type is removed<br>A test framework plugin used to be responsible for allowing Stryker to hook into the test framework to implement test filtering and perTest coverage analysis. In practice, this was often tightly coupled to the test runner itself. That&#x27;s why we&#x27;ve decided to drop this plugin type and make the Test Runner plugin responsible for hooking into the test framework directly. Therefore the following dependencies can simply be removed: <code>@stryker-mutator/mocha-framework</code> and <code>@stryker-mutator/jasmine-framework</code>.</li><li>The <code>OptionsEditor</code> plugin type is removed<br>Options editors provided a way for plugins to edit the Stryker options directly. In practice, this was used to load plugin-specific options and attach them to the StrykerOptions object for later use. Plugins are now expected to load their options in their life cycle.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="-whats-next"></a>üîÆ What&#x27;s next<a class="hash-link" href="#-whats-next" title="Direct link to heading">#</a></h2><p>We&#x27;ll be focussing on getting Stryker 4.0 released. For that to happen, we would appreciate your feedback. Feel free to report any <a href="https://github.com/stryker-mutator/stryker-js/issues/new" target="_blank" rel="noopener noreferrer">issues</a> you have with this beta release.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/stryker">stryker</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/stryker-mutator/stryker-mutator.github.io/edit/develop/blog/2020-07-13-announcing-stryker-4-beta-mutation-switching.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/announcing-stryker-4-mutation-switching"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ Announcing Stryker 4.0 - Mutation Switching</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/azure-pipelines-integration"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Integrating Stryker.NET in your azure pipelines ¬ª</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-mutation-switching" class="table-of-contents__link">üëΩ Mutation switching</a></li><li><a href="#-instrumentation-with-babel" class="table-of-contents__link">üê† Instrumentation with Babel</a></li><li><a href="#-build-command-support" class="table-of-contents__link">üë∑‚Äç‚Äç Build command support</a></li><li><a href="#-checker-plugin" class="table-of-contents__link">‚úÖ Checker plugin</a></li><li><a href="#-more-coverage-analysis" class="table-of-contents__link">‚òî More coverage analysis</a></li><li><a href="#-other-changes" class="table-of-contents__link">üßπ Other changes</a></li><li><a href="#-whats-next" class="table-of-contents__link">üîÆ What&#39;s next</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/General/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/stryker-mutator/shared_invite/enQtOTUyMTYyNTg1NDQ0LTU4ODNmZDlmN2I3MmEyMTVhYjZlYmJkOThlNTY3NTM1M2QxYmM5YTM3ODQxYmJjY2YyYzllM2RkMmM1NjNjZjM" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/stryker_mutator" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/stryker-mutator/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://infosupport.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/info-support.svg" alt="Info Support Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/info-support.svg" alt="Info Support Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Powered by <a target="_blank" rel="noopener noreferrer" href="https://www.infosupport.com/open-source/">Info Support</a>.<br>Stryker is released under the Apache 2.0 license. Site by the <a target="_blank" rel="noopener noreferrer" href="https://github.com/orgs/stryker-mutator/people">Stryker team</a>. Logo by Selina van den Top.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c69fd204.js"></script>
<script src="/assets/js/main.362942d5.js"></script>
</body>
</html>